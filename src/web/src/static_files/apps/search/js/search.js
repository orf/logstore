// Generated by CoffeeScript 1.7.1
(function() {
  var getSearchResults, getServerNameFromID;

  $(document).ready(function() {
    var query, template, template_func;
    query = $("#search_query").val();
    template = $("#log_template").text();
    template_func = doT.template(template);
    getSearchResults(query).done(function(data) {
      $("#hits").text(data.hits.total);
      $("#took").text(data.took);
      $("#search_results").append(template_func({
        messages: data.hits.hits.reverse(),
        getServerName: getServerNameFromID,
        moment: moment
      }));
      return $("html, body").animate({
        scrollTop: $(document).height()
      }, 1000);
    });
    return null;
  });

  getServerNameFromID = function(id) {
    console.log(id);
    return window.serverNames[id];
  };

  getSearchResults = function(query, size) {
    if (size == null) {
      size = 100;
    }
    return $.get(Django.url("api:search"), {
      query: query,
      size: size
    });
  };

}).call(this);

//# sourceMappingURL=search.map
